<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backdoor Games Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4cc9f0;
        }
        
        .games-grid {
            display: grid;
            gap: 15px;
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4cc9f0;
            backdrop-filter: blur(5px);
            transition: transform 0.3s ease;
        }
        
        .game-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .game-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4cc9f0;
        }
        
        .game-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .last-update {
            text-align: center;
            margin-top: 20px;
            opacity: 0.7;
            font-size: 0.9em;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Backdoor Games Tracker</h1>
            <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–≤ –±—ç–∫–¥–æ—Ä–∞</p>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalGames">0</div>
                <div>–í—Å–µ–≥–æ –∏–≥—Ä</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalLaunches">0</div>
                <div>–í—Å–µ–≥–æ –∑–∞–ø—É—Å–∫–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="uniqueGames">0</div>
                <div>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–≥—Ä</div>
            </div>
        </div>
        
        <div id="gamesList" class="games-grid">
            <div class="empty-state" id="emptyState">
                –û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Roblox...
            </div>
        </div>
        
        <div class="last-update">
            –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastUpdate">-</span>
        </div>
    </div>

    <script>
        class GameTracker {
            constructor() {
                this.games = JSON.parse(localStorage.getItem('robloxGames') || '[]');
                this.init();
            }
            
            init() {
                this.handleUrlData();
                this.updateUI();
                setInterval(() => this.updateUI(), 5000);
            }
            
            handleUrlData() {
                const urlParams = new URLSearchParams(window.location.search);
                const dataParam = urlParams.get('data');
                
                if (dataParam) {
                    try {
                        const gameData = JSON.parse(decodeURIComponent(dataParam));
                        this.addGame(gameData);
                        
                        // –û—á–∏—â–∞–µ–º URL
                        window.history.replaceState({}, '', window.location.pathname);
                    } catch (e) {
                        console.log('–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö:', e);
                    }
                }
            }
            
            addGame(newGame) {
                const existingIndex = this.games.findIndex(g => g.placeId === newGame.placeId);
                const now = new Date().toISOString();
                
                if (existingIndex !== -1) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–≥—Ä—É
                    this.games[existingIndex] = {
                        ...this.games[existingIndex],
                        ...newGame,
                        lastSeen: now,
                        seenCount: (this.games[existingIndex].seenCount || 1) + 1,
                        lastPlayers: newGame.players
                    };
                } else {
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É
                    this.games.push({
                        ...newGame,
                        firstSeen: now,
                        lastSeen: now,
                        seenCount: 1,
                        lastPlayers: newGame.players
                    });
                }
                
                this.save();
                this.updateUI();
            }
            
            save() {
                localStorage.setItem('robloxGames', JSON.stringify(this.games));
            }
            
            updateUI() {
                const gamesList = document.getElementById('gamesList');
                const emptyState = document.getElementById('emptyState');
                const totalGames = document.getElementById('totalGames');
                const totalLaunches = document.getElementById('totalLaunches');
                const uniqueGames = document.getElementById('uniqueGames');
                const lastUpdate = document.getElementById('lastUpdate');
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                const launches = this.games.reduce((sum, game) => sum + (game.seenCount || 1), 0);
                totalGames.textContent = this.games.length;
                totalLaunches.textContent = launches;
                uniqueGames.textContent = this.games.length;
                lastUpdate.textContent = new Date().toLocaleString();
                
                // –°–ø–∏—Å–æ–∫ –∏–≥—Ä
                if (this.games.length === 0) {
                    emptyState.style.display = 'block';
                    gamesList.innerHTML = '';
                    gamesList.appendChild(emptyState);
                } else {
                    emptyState.style.display = 'none';
                    
                    const sortedGames = [...this.games].sort((a, b) => 
                        new Date(b.lastSeen) - new Date(a.lastSeen)
                    );
                    
                    gamesList.innerHTML = sortedGames.map(game => `
                        <div class="game-card">
                            <div class="game-name">${this.escapeHtml(game.name)}</div>
                            <div class="game-info">
                                <div><strong>Place ID:</strong> ${game.placeId}</div>
                                <div><strong>–°–æ–∑–¥–∞—Ç–µ–ª—å:</strong> ${this.escapeHtml(game.creator)}</div>
                                <div><strong>–ò–≥—Ä–æ–∫–æ–≤:</strong> ${game.lastPlayers || game.players || 0}</div>
                                <div><strong>–ó–∞–ø—É—Å–∫–æ–≤:</strong> ${game.seenCount || 1}</div>
                                <div><strong>–ü–µ—Ä–≤—ã–π —Ä–∞–∑:</strong> ${new Date(game.firstSeen).toLocaleDateString()}</div>
                                <div><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π:</strong> ${new Date(game.lastSeen).toLocaleString()}</div>
                            </div>
                        </div>
                    `).join('');
                }
            }
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç—Ä–µ–∫–µ—Ä
        new GameTracker();
    </script>
</body>
</html>
